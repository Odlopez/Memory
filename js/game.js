"use strict";!function(){var c=document.querySelector(".menu__item--end"),i=document.querySelector(".menu__points"),r=document.querySelector(".menu__timer"),a=document.querySelector(".menu__time-button"),s=document.querySelector(".menu__select"),u={},l={},d={},m=0,w=function(t){Object.keys(t).forEach(function(e){delete t[e]})},o=function(e){for(var t in u)if(u[t].element===e)return void("false"===(n=u[t]).element.dataset.shirt?l[n.number]=u[n.number]:delete l[n.number]);var n},f=function(e,t,n){if(e){for(var o in l)d[o]=l[o],t(u[o].element),delete u[o],Object.keys(u).length||n(window.constants.SUCCESSFUL_MESSAGE,m);m+=Object.keys(u).length*window.constants.POINT_COEFFICIENT,i.textContent=m}else m-=Object.keys(d).length*window.constants.POINT_COEFFICIENT,i.textContent=m};window.game={logic:function(e,t){o(e);var n=Object.keys(l);2===n.length&&(l[n[0]].URL===l[n[1]].URL?(f(!0,t.delete,t.popup),w(l)):(document.removeEventListener("click",t.callback),setTimeout(function(){t.rotate(l[n[0]].element,l[n[0]]),t.rotate(l[n[1]].element,l[n[1]]),f(!1),w(l),document.addEventListener("click",t.callback)},window.constants.HANG_TIME)))},cardDeck:u,openCards:l,guessedCards:d,points:m,new:function(o){return function(){for(var e in w(u),w(l),w(d),m=0,window.state.initGame(),window.cards.make(),u)window.rotate(u[e].element,u[e]);document.removeEventListener("click",o),setTimeout(function(){for(var e in u)window.rotate(u[e].element,u[e]);var t,n;document.addEventListener("click",o),c.style.display="block",a.classList.contains("menu__time-button--on")&&(t=60*s.value,n=setInterval(function(){r.textContent=--t,0===t&&(window.popup.create(window.constants.TIMEOUT_MESSAGE,m),clearInterval(n)),"none"==c.style.display&&clearInterval(n)},1e3))},window.constants.CARDS_DISPLAY_TIME)}},init:function(){window.state.initStart(),w(o)}}}();